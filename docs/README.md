# 구현할 기능

>편의상 금액 입력의 주체를 "**자판기 주인**"과 "**자판기 이용객**"으로 구분



## 자판기 주인으로부터의 입력 구현

- 자판기가 보유할 초기 금액을 입력한다.
    - [예외처리1] 숫자가 아닌 값을 입력하면 안된다.
    - [예외처리2] 10으로 나누어 떨어지지 않는 숫자를 입력하면 안된다.

- 자판기 주인 `[상품, 가격, 수량]`을 입력하여, `판매 상품`, `판매 가격`, `판매 수량` 초깃값을 정한다.
    - [예외처리1] 상품 가격의 최소 금액은 100원이다.
    - [예외처리2] 입력한 상품 가격은 10원으로 나누어 떨어져야 한다.
    - [예외처리3] `[ ]` `,` `;` 구분자 형식을 지켜 입력한다.



## 사용자로부터의 입력 구현

- 사용자는 먼저 **자판기에 투입할 금액**을 입력한다. (안내 멘트 : `투입 금액을 입력해 주세요`)
- 사용자는 안내문에 따라, **구매할 상품**을 입력한다. (안내 멘트 : `구매할 상품을 입력해 주세요`)



## 출력 구현

- 자판기가 보유할 초기 금액을 입력하면, 자판기가 보유한 동전을 화면에 보여준다.

- 사용자가 자판기에 **구매할 상품**을 입력하였을 때, 다음과 같은 3가지의 분기가 있다.

    1. 정상적으로 구매가 된 경우

        - 남은 차액을 보여주고, 구매할 상품의 입력을 다시 기다린다.

    2. 남은 금액보다 비싼 상품을 입력하려는 경우,

        - 구매에 실패하여, 업데이트되지 못한 남은 금액을 보여주고, 구매할 상품의 입력을 다시 기다린다.

    3. 구매 후 남은 금액이 상품의 최저 가격 밑으로 내려가게 된 경우,

        - 거스름돈을 반환하고 프로그램을 종료한다.

        - 자판기가 거슬러 줄 돈이 부족한 상황이 된다면, 나름대로 최선을 다해 거슬러 준다.
            - 예) 300원 3개를 보유한 자판기가 400원을 거슬러주어야 하는 경우, 그냥 300원만 거슬러 준다.



## Vending Machine의 동작 구현

- 자판기 보유 금액이 동전화되는 방식이 랜덤하다.
- 사용자에게 제공한 상품에 따라, 자판기 내 상품의 재고 수량을 업데이트한다.
- 거스름돈을 반환할 때, 반환되는 동전이 최소화되도록 한다.





----------

## 개발일지

### DAY01

- 구현
    - 프로그램의 큰 구조를 설계
    - 자판기가 보유할 초기 금액을 입력하면, 입력 값이 유효한지 검사.
    - 입력한 값에 맞게 500, 100, 50, 10원짜리 동전이 랜덤하게 생성되도록 함.
- TODO
    - 자판기 주인 `[상품, 가격, 수량]`을 입력하여, `판매 상품`, `판매 가격`, `판매 수량` 초깃값을 정한다.

### DAY02

- 구현
  - 자판기 주인이 `[상품, 가격, 수량]`을 입력하여, `판매 상품`, `판매 가격`, `판매 수량` 초깃값을 정할 수 있게 함
  - 자판기 사용자가 투입한 금액을 입력 받아 예외처리
  - 자판기 사용자가 상품을 구매할 때마다, 재고를 업데이트
- TODO
  - 기능 테스트를 통과하지 못하는데, 이 부분을 debug

### DAY03

- 구현
  - 기능 테스트를 통과하도록 `pickNumberInList()`를 활용하여 동전 랜덤 생성
    - 랜덤하게 동전을 택하여 동전을 생성하고, 해당 가치만큼 total 투입 총액에서 깎음
    - 0원이 되면, 분배 완료.
- TODO
  - 설계를 더 좋게할 부분이 없는지 점검



### 느낀점

- 자바의 클래스들을 패키지 단위로 묶음할 수 있음을 알게되었습니다.
- 일종의 MVC 디자인 패턴을 적용하고자 하였습니다.
  - `M` : `models` 패키지
    - `Coin` 클래스
    - `Product` 클래스
  - `V` : `VendingMachineUI` 클래스
  - `C` : `VendingMachineMain` 클래스
- 함수의 길이가 15라인을 넘어가지 않게 해아한다는 조건으로 인해, 작은 단위로 함수를 만들어나갈 수밖에 없었습니다.
  - 함수의 길이가 15라인을 넘어가지 않게 해야한다는 조건은 "함수가 한 가지 작은 단위의 기능을 담당하도록 하라"하는 정책을 엄수하게 했습니다.
- 프로그램의 사이즈가 살짝 커지니, 큰 지향을 잘 잡지 못하면, 스파게티 코드가 되기 쉽상이었습니다.
- 유지 보수가 쉬운 아름다운 설계의 중요성이 더 실감되었습니다.